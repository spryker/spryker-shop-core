{% extends template('widget') %}

{% define data = {
    quoteRequestOverviewCollection: _widget.quoteRequestOverviewCollection
} %}

{% block body %}
    <a href="{{ path('agent-quote-request') }}">
        {{ 'agent_quote_request_widget.quote_request' | trans }}

        {% include atom('icon') with {
            data: {
                name: 'th-list'
            }
        } only %}
    </a>
    <ul class="menu menu--wide text-left quote-request__list">
        {% if data.quoteRequestOverviewCollection.currentQuoteRequest is not empty %}
            <li class="menu__item" style="background-color: #f4f4f4">
                {% include molecule('quote-request-detail', 'AgentQuoteRequestWidget') with {
                    data: {
                        quoteRequest: data.quoteRequestOverviewCollection.currentQuoteRequest
                    }
                } only %}
            </li>
            <li class="menu__separator menu__separator--horizontal-line"></li>
        {% endif %}

        {% if data.quoteRequestOverviewCollection.quoteRequests | length %}
            {% for quoteRequest in data.quoteRequestOverviewCollection.quoteRequests %}
                <li class="menu__item">
                    {% include molecule('quote-request-detail', 'AgentQuoteRequestWidget') with {
                        data: {
                            quoteRequest: quoteRequest
                        }
                    } only %}
                </li>
                <li class="menu__separator menu__separator--horizontal-line"></li>
            {% endfor %}
        {% else %}
            <li class="menu__item">
                <span class="no-items no-quote-requests">
                    {{ 'agent_quote_request_widget.no_request_created' | trans }}
                </span>
            </li>
        {% endif %}

        <li class="menu__item">
            <div class="grid grid--justify">
                <div class="col">
                    <a href="{{ path('agent-quote-request') }}" class="button button--hollow">
                        {{ 'agent_quote_request_widget.view_all_requests' | trans }}
                    </a>
                </div>
                <div class="col">
                    <a href="{{ path('agent-quote-request/create') }}" class="button button--success">
                        {{ 'agent_quote_request_widget.create_new_request' | trans }}
                    </a>
                </div>
            </div>
        </li>
    </ul>
{% endblock %}
