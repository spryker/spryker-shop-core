{% extends molecule('product-item') %}

{% define config = {
    name: 'configured-bundle-product',
} %}

{% define data = {
    quantity: data.product.quantity | default,
} %}

{% block extraClass %}{% endblock %}

{% block imageContainer %}
    <div class="{{ config.name }}__col col col--sm-12 col--lg-2">
        {% set imageModifiers =  ['small'] %}

        {% block image %}
            {% include atom('thumbnail') with {
                modifiers: imageModifiers,
                attributes: {
                    src: data.image,
                    alt: data.name,
                },
            } only %}
        {% endblock %}
    </div>
{% endblock %}

{% block content %}
    <div class="{{ config.name }}__col col col--sm-12 col--lg-10 col--middle">
        {% block contentInner %}
            {% block generalInformation %}
                {% block name -%}
                    <h6>{{ data.name }}</h6>
                {%- endblock %}

                {% block sku -%}
                    <small class="text-secondary">
                        {{- 'configured_bundle.item_sku' | trans }} {{ data.sku -}}
                    </small>
                {%- endblock %}
            {% endblock %}

            {% block priceInformation %}
                <div class="{{ config.name }}__container">
                    {% block priceInformationInner %}
                        {% block priceCol %}
                            <div class="{{ config.name }}__col col col--sm-4 col--lg-5">
                                {% block price %}
                                    <span class="{{ config.name }}__text">
                                        {% block priceInner %}
                                            {% if can('SeePricePermissionPlugin') and data.product.unitPrice %}
                                                {%- block priceTitle -%}
                                                    {{ 'configured_bundle.price' | trans }}
                                                {% endblock %}

                                                {%- block priceValue -%}
                                                    {{ data.product.unitPrice | money(true, data.currencyIsoCode) }}
                                                {% endblock %}
                                            {% else %}
                                                {{ 'customer.access.cannot_see_price' | trans }}
                                            {% endif %}
                                        {% endblock %}
                                    </span>
                                {% endblock %}
                            </div>
                        {% endblock %}

                        {% block quantityCol %}
                            <div class="{{ config.name }}__col col col--sm-4 col--lg-3 text-center">
                                {% block quantity %}
                                    <span class="{{ config.name }}__text">
                                        {{ 'configured_bundle.quantity' | trans }} {{ data.quantity }}
                                    </span>
                                {% endblock %}
                            </div>
                        {% endblock %}

                        {% block totalCol %}
                            <div class="{{ config.name }}__col col col--sm-4 col--lg-4 text-right">
                                {% block total %}
                                    <strong class="{{ config.name }}__text">
                                        {% block totalInner %}
                                            {% if can('SeePricePermissionPlugin') and data.product.sumSubtotalAggregation %}
                                                {%- block totalTitle -%}
                                                    {{ 'configured_bundle.total' | trans }}
                                                {% endblock %}

                                                {%- block totalValue -%}
                                                    {{ data.product.sumSubtotalAggregation | money(true, data.currencyIsoCode) }}
                                                {% endblock %}
                                            {% else %}
                                                {{ 'customer.access.cannot_see_price' | trans }}
                                            {% endif %}
                                        {% endblock %}
                                    </strong>
                                {% endblock %}
                            </div>
                        {% endblock %}
                    {% endblock %}
                </div>
            {% endblock %}
        {% endblock %}
    </div>
{% endblock %}

{% block labels %}{% endblock %}

{% block groups %}{% endblock %}

{% block rating %}{% endblock %}

{% block priceContainer %}{% endblock %}

{% block actionsContainer %}{% endblock %}
